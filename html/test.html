<html><head><meta charset="utf-8"><script src="/static/highlight/highlight.min.js"></script><script src="/static/highlight/languages/javascript.min.js"></script><link rel="stylesheet" href="/static/highlight/styles/monokai-sublime.min.css"><link rel="stylesheet" href="/static/markdown.css"></head><body><div class="markdown-body"><h2 id="egg-role">egg-role</h2><blockquote><p>egg 角色控制插件</p></blockquote><p><a href="https://www.travis-ci.org/lakca/egg-role"><img src="https://www.travis-ci.org/lakca/egg-role.svg?branch=master" alt="Build Status"></a><a href="https://codecov.io/gh/lakca/egg-role"><img src="https://codecov.io/gh/lakca/egg-role/branch/master/graph/badge.svg" alt="codecov"></a></p><h2 id="-">特点：</h2><ul><li>所有访问控制均基于配置文件。</li><li>根据应用自身提供的<a href="./test/fixtures/apps/default/app/extend/context.js">ctx.getRoles</a>函数获取当前用户的角色，插件本身不提供角色管理的功能。</li><li>可以控制<a href="https://eggjs.org/zh-cn/basics/router.html">router</a>,<a href="https://eggjs.org/zh-cn/basics/router.html">service</a>等的访问。</li><li>基于<a href="https://eggjs.org/zh-cn/core/i18n.html">egg-i18n</a>的自定义访问错误信息。</li></ul><h2 id="-">配置示例：</h2><pre><code class="hljs language-js"><span class="hljs-keyword">function</span> <span class="hljs-title">test</span>() {
  console.log('Hello');
}

exports.role = {
  policy: {
    <span class="hljs-symbol">'user_admin</span>': [ // role <span class="hljs-keyword">is</span> <span class="hljs-symbol">'user_admin</span>'
      <span class="hljs-symbol">'router</span>:updateUser', // the role can <span class="hljs-keyword">access</span> router which name <span class="hljs-keyword">is</span> <span class="hljs-symbol">'updateUser</span>'
      <span class="hljs-symbol">'controller</span>:user.listUsers' // the role can <span class="hljs-keyword">access</span> controller which name <span class="hljs-keyword">is</span> <span class="hljs-symbol">'user.listUsers</span>' ignoring what the router <span class="hljs-keyword">is</span>.
    ],
    <span class="hljs-symbol">'comment_inspector</span>': [
      <span class="hljs-symbol">'router</span>:denyComment',
      <span class="hljs-symbol">'router</span>:stickComment',
      <span class="hljs-symbol">'controller</span>:comment.listComments'
    ]
  }
};</code></pre><p><a href="./config/config.default.js">默认配置</a></p></div></body></html>